services:
  abcoin:
    image: dj/abcoin:${ABCOIN_TAG}
    container_name: abcoin
    restart: always
    labels:
      - 'traefik.enable=true'

      - 'traefik.http.routers.abcoin.rule=Host(`${ABCOIN_HOST_PUBLIC_URL}`) && PathPrefix(`/abcoin`)'
      - 'traefik.http.routers.abcoin.entrypoints=websecure'
      - 'traefik.http.routers.abcoin.tls=true'
      - 'traefik.http.routers.abcoin.tls.certresolver=le'
      - 'traefik.http.routers.abcoin.middlewares=strip-abcoin'
      - 'traefik.http.middlewares.strip-abcoin.stripPrefix.prefixes=/abcoin'
    networks:
      - shared_network

networks:
  shared_network:
    external: true
